# 옵저버 패턴(Observer Pattern)

옵저버 패턴은 한 객체의 상태가 바뀌면 그 객체에 의존하는 다른 객체들에게 연락이가고, 자동으로 내용이 갱신되는 방식으로 1:N 의존성을 정의합니다.

- 한 객체의 상태가 변경되면, 그 객체를 의존하는 모든 객체에게 연락이 갑니다.
- 객체 사이에 1:N 관계를 정의합니다.

## 옵저버 패턴의 작동 원리

![옵저버 작동원리](/design-pattern/img/observer-pattern_content.png)

객체 소개

- 주제: 상태를 가지고 있는 객체
- 옵저버: 관찰자, 주제를 지켜보고 있는 객체

동작

- 등록: 특정 주제에 대해 옵저버가 되고 싶으면, 주제에게 등록 요청을 함으로써 옵저버가 된다.
- 탈퇴: 그만 관찰하고 싶으면, 주제에게 탈퇴 요청을 함으로써 옵저버를 그만한다.
- 값 갱신: 주제의 값이 변경되면 변경된 내용을 옵저버들에게 알려준다.

예시
: 주제를 헤드헌터로, 옵저버들을 구직자로 생각하면 이해가 쉽다.

- 등록
  - 구직자는 헤드헌터에게 공고가 생기면 연락을 달라고 연락처를 준다.
  - 헤드헌터는 명단을 관리하며, 이 명단에 구직자의 정보를 추가한다.
- 탈퇴
  - 구직자가 직장을 구해, 더이상 연락받고싶지 않다고 헤드헌터에게 말한다.
  - 헤드헌터는 자신이 관리하는 명단에서 해당 구직자를 제거한다.
- 값 갱신
  - 새로운 공고가 올라오면 헤드헌터는 명단에 적힌 구직자들에게 이를 알려준다.

## 코드로 이해하기

![옵저버 패턴](/design-pattern/img/observer-pattern_basic.png)

객체

- `Subject`: 관찰할 대상을 정의한다.
- `Observer`: 관찰자를 정의한다.
- `ConcreteSubject`: 실제 관찰할 대상으로, `Subject`를 구현한다.
- `ConcreteObserver`: 실제로 관찰하는 관찰자들은 `Observer`를 구현한다.

특징

- 1:N 관계 : `Subject`는 `Observer`들을 리스트(`List`, `Set` 등)로 관리한다.
- 누구든 Observer를 구현한다면 옵저버가 될 수 있다.

[관련 코드](https://github.com/sujeong-0/design-pattern/commit/bbdaf65b88187c7bfa3696125997184a6ca2ef4b)

### 예시에 옵저버 패턴 적용해보기

[예시 코드](https://github.com/sujeong-0/design-pattern/commit/c080009350b5929d2fab46b89f8898eb7cf631cd)

## 느슨한 결합(Loose Coupling)

느슨한 결합은 객체들이 상호작용할 수 있지만, 서로를 잘 모르는 관계를 의미합니다.

이런 느슨한 결합을 활용하면, 변경 사항이 생겨도 크게 문제가 되지않도록 상호의존성을 최소화할 수 있게 된다.

### 옵저버 패턴에서의 느슨한 결합

- 주제는 옵저버가 특정 인터페이스(`Observer`)를 구현한다는 사실만 알고 있다.
- 옵저버는 언제든지 새로 추가/제거할 수 있다.
- 새로운 종류의 옵저버가 생겨도 특정 인터페이스(`Observer`)를 구현한 뒤 추가만 하면된다.
- 주제와 옵저버가 다른 용도로 사용된다고 해도, 전혀 문제가 되지 않는다.
- 주제와 옵저버의 내용이 변경되어도 문제가 생기지 않는다.

### 참조

- [도서 - 헤드 퍼스트 디자인패턴(개정판)](https://www.hanbit.co.kr/store/books/look.php?p_code=B6113501223)